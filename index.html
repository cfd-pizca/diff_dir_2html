<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- This file was created with the aha Ansi HTML Adapter. https://github.com/theZiz/aha -->
<html xmlns="http://www.w3.org/1999/xhtml">
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="application/xml+xhtml; charset=UTF-8"/>
  <meta charset="UTF-8">
  <title>diff :: case1 (8d5ac2de) :: case2 (8d5ac2de)</title>
  <style>:root {
    --zenburn-bg:       #3f3f3f;
    --zenburn-fg:       #dcdccc;
    --zenburn-highlight:#6f6f6f;
    --zenburn-accent:   #f0dfaf;
    --zenburn-muted:    #9fafaf;
    --indent-size:      1.5em;
}

body {
    color: var(--zenburn-fg);
    background-color: var(--zenburn-bg);
    font-family: monospace;
    line-height: 1.4;
    margin: 0;
    padding: 1em;
}

.diff-container {
    margin: 1em 0;
}

/* Directory and file containers */
.directory, .file {
    margin: 0.2em 0;
}

/* Directory styling */
.dir-toggle {
    cursor: pointer;
    padding: 0.4em 0.6em;
    background-color: #4a4a4a;
    border-left: 3px solid var(--zenburn-accent);
    margin: 0.2em 0;
    display: flex;
    align-items: center;
    transition: background-color 0.2s;
}

.dir-toggle:hover {
    background-color: #5a5a5a;
}

.dir-toggle .dir-icon {
    margin-right: 0.5em;
}

.dir-content {
    margin-left: var(--indent-size);
    border-left: 1px dashed #5a5a5a;
    padding-left: 0.5em;
}

/* File styling */
.file-header {
    cursor: pointer;
    padding: 0.4em 0.6em;
    background-color: #3a3a3a;
    border-left: 2px solid #6a6a6a;
    margin: 0.2em 0;
    display: flex;
    align-items: center;
    transition: background-color 0.2s;
}

.file-header:hover {
    background-color: #4a4a4a;
}

.file-header .file-icon {
    margin-right: 0.5em;
}

.file-content {
    margin-left: var(--indent-size);
    padding: 0.5em 0;
}

/* Diff content styling */
pre {
    margin: 0;
    white-space: pre-wrap;
    font-family: 'Courier New', monospace;
    font-size: 0.9em;
    line-height: 1.3;
}

/* Collapsed state */
.dir-content.collapsed,
.file-content.collapsed {
    display: none;
}

/* Hunk styling */
.hunk {
    margin: 0.5em 0;
    border: 1px solid #4a4a4a;
    border-radius: 4px;
    overflow: hidden;
}

.hunk-header {
    cursor: pointer;
    padding: 0.4em 0.8em;
    background-color: #333;
    color: var(--zenburn-fg);
    display: flex;
    align-items: center;
    transition: background-color 0.2s;
    border-bottom: 1px solid #444;
}

.hunk-header:hover {
    background-color: #3a3a3a;
}

.hunk-toggle {
    display: inline-block;
    width: 1em;
    text-align: center;
    margin-right: 0.5em;
    font-size: 0.8em;
    color: var(--zenburn-muted);
}

.hunk-title {
    font-weight: bold;
    margin-right: 1em;
    font-family: monospace;
    color: var(--zenburn-accent);
}

.hunk-context {
    color: var(--zenburn-muted);
    font-family: monospace;
    font-size: 0.9em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex-grow: 1;
}

.hunk-content {
    background-color: #2a2a2a;
    overflow-x: auto;
}

.diff-non-hunk {
    margin: 0.5em 0;
    padding: 0.5em;
    background-color: #2a2a2a;
    border-radius: 4px;
    font-size: 0.9em;
}

.diff-non-hunk pre {
    margin: 0;
    padding: 0;
}

/* Responsive design */
@media (max-width: 768px) {
    :root {
        --indent-size: 1em;
    }
    
    body {
        font-size: 14px;
        padding: 0.5em;
    }
    
    .dir-toggle, .file-header {
        padding: 0.3em 0.5em;
    }
}

/* Diff colors */
.diff-added {
    color: #5f9f5f;
    background-color: #2a3a2a;
}

.diff-removed {
    color: #cc6666;
    background-color: #3a2a2a;
}

.diff-context {
    color: var(--zenburn-fg);
}

.diff-header {
    color: var(--zenburn-accent);
    font-weight: bold;
    padding: 0.5em;
    background-color: #2a2a2a;
    border-radius: 4px;
    margin: 0.5em 0;
    font-family: monospace;
    white-space: pre-wrap;
    word-break: break-all;
}

/* Line numbers in diffs */
.line-number {
    color: var(--zenburn-muted);
    user-select: none;
    padding: 0 1em;
    margin-right: 1em;
    border-right: 1px solid #4a4a4a;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .hunk-header {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .hunk-title {
        margin-right: 0;
        margin-bottom: 0.3em;
    }
    
    .hunk-context {
        font-size: 0.8em;
        width: 100%;
    }
}
</style>
</head>
<body>
  <h1>diff :: case1 (8d5ac2de) :: case2 (8d5ac2de)</h1>
  <div id="diff-content">
    <pre>
      <span style="font-weight:bold;">diff --git a/case1/config/settings.json b/case2/config/settings.json</span>
<span style="font-weight:bold;">index 07a695a..b217ebb 100644</span>
<span style="font-weight:bold;">--- a/case1/config/settings.json</span>
<span style="font-weight:bold;">+++ b/case2/config/settings.json</span>
<span style="color:teal;">@@ -1,17 +1,19 @@</span>
 {
<span style="color:red;">-    &quot;app_name&quot;: &quot;Math App&quot;,</span>
<span style="color:red;">-    &quot;version&quot;: &quot;1.0.0&quot;,</span>
<span style="color:red;">-    &quot;debug&quot;: true,</span>
<span style="color:red;">-    &quot;max_history&quot;: 10,</span>
<span style="color:red;">-    &quot;precision&quot;: 2,</span>
<span style="color:green;">+</span><span style="color:green;">    &quot;app_name&quot;: &quot;Math App Pro&quot;,</span>
<span style="color:green;">+</span><span style="color:green;">    &quot;version&quot;: &quot;1.1.0&quot;,</span>
<span style="color:green;">+</span><span style="color:green;">    &quot;debug&quot;: false,</span>
<span style="color:green;">+</span><span style="color:green;">    &quot;max_history&quot;: 20,</span>
<span style="color:green;">+</span><span style="color:green;">    &quot;precision&quot;: 4,</span>
     &quot;theme&quot;: {
<span style="color:red;">-        &quot;primary_color&quot;: &quot;#3498db&quot;,</span>
<span style="color:red;">-        &quot;secondary_color&quot;: &quot;#2ecc71&quot;,</span>
<span style="color:red;">-        &quot;font_family&quot;: &quot;Arial, sans-serif&quot;</span>
<span style="color:green;">+</span><span style="color:green;">        &quot;primary_color&quot;: &quot;#2980b9&quot;,</span>
<span style="color:green;">+</span><span style="color:green;">        &quot;secondary_color&quot;: &quot;#27ae60&quot;,</span>
<span style="color:green;">+</span><span style="color:green;">        &quot;font_family&quot;: &quot;'Segoe UI', Arial, sans-serif&quot;</span>
     },
     &quot;features&quot;: {
<span style="color:red;">-        &quot;scientific_mode&quot;: false,</span>
<span style="color:green;">+</span><span style="color:green;">        &quot;scientific_mode&quot;: true,</span>
         &quot;history_tracking&quot;: true,
<span style="color:red;">-        &quot;unit_conversion&quot;: false</span>
<span style="color:red;">-    }</span>
<span style="color:green;">+</span><span style="color:green;">        &quot;unit_conversion&quot;: true,</span>
<span style="color:green;">+</span><span style="color:green;">        &quot;dark_mode&quot;: true</span>
<span style="color:green;">+</span><span style="color:green;">    },</span>
<span style="color:green;">+</span><span style="color:green;">    &quot;default_view&quot;: &quot;scientific&quot;</span>
 }
<span style="font-weight:bold;">diff --git a/case1/main.py b/case2/main.py</span>
<span style="font-weight:bold;">index e7d28bb..e025cef 100644</span>
<span style="font-weight:bold;">--- a/case1/main.py</span>
<span style="font-weight:bold;">+++ b/case2/main.py</span>
<span style="color:teal;">@@ -1,20 +1,20 @@</span>
 #!/usr/bin/env python3
 &quot;&quot;&quot;
<span style="color:red;">-Basic Calculator Application</span>
<span style="color:red;">-A simple command-line calculator for basic arithmetic operations.</span>
<span style="color:green;">+</span><span style="color:green;">Enhanced Calculator Application</span>
<span style="color:green;">+</span><span style="color:green;">A simple command-line calculator with basic arithmetic operations.</span>
 &quot;&quot;&quot;
 
 import json
 import sys
<span style="color:red;">-from math_operations.calculator import add, subtract, multiply, divide</span>
<span style="color:green;">+</span><span style="color:green;">from math_operations.calculator import add, subtract, multiply, divide, power</span>
 
 def load_config():
<span style="color:red;">-    &quot;&quot;&quot;Load application configuration.&quot;&quot;&quot;</span>
<span style="color:green;">+</span><span style="color:green;">    &quot;&quot;&quot;Load application configuration with error handling.&quot;&quot;&quot;</span>
     try:
         with open('config/settings.json', 'r') as f:
             return json.load(f)
     except FileNotFoundError:
<span style="color:red;">-        print(&quot;Error: Configuration file not found&quot;)</span>
<span style="color:green;">+</span><span style="color:green;">        print(&quot;Error: Could not find configuration file&quot;)</span>
         sys.exit(1)
 
 def get_number(prompt):
<span style="color:teal;">@@ -32,7 +32,8 @@</span> def show_menu():
     print(&quot;2. Subtract&quot;)
     print(&quot;3. Multiply&quot;)
     print(&quot;4. Divide&quot;)
<span style="color:red;">-    print(&quot;5. Exit&quot;)</span>
<span style="color:green;">+</span><span style="color:green;">    print(&quot;5. Power (a^b)&quot;)</span>
<span style="color:green;">+</span><span style="color:green;">    print(&quot;6. Exit&quot;)</span>
 
 def perform_operation(operation, a, b, precision):
     &quot;&quot;&quot;Perform the requested operation and return the result.&quot;&quot;&quot;
<span style="color:teal;">@@ -44,6 +45,8 @@</span> def perform_operation(operation, a, b, precision):
         return multiply(a, b)
     elif operation == '4':
         return divide(a, b)
<span style="color:green;">+</span><span style="color:green;">    elif operation == '5':</span>
<span style="color:green;">+</span><span style="color:green;">        return power(a, b)</span>
     return None
 
 def main():
<span style="color:teal;">@@ -51,21 +54,24 @@</span> def main():
     config = load_config()
     print(f&quot;=== {config['app_name']} v{config['version']} ===&quot;)
     
<span style="color:green;">+</span><span style="color:green;">    if config.get('features', {}).get('dark_mode', False):</span>
<span style="color:green;">+</span><span style="color:green;">        print(&quot;Dark mode: Enabled&quot;)</span>
<span style="color:green;">+</span><span style="background-color:red;">    </span>
     while True:
         show_menu()
<span style="color:red;">-        choice = input(&quot;\nSelect an operation (1-5): &quot;).strip()</span>
<span style="color:green;">+</span><span style="color:green;">        choice = input(&quot;\nSelect an operation (1-6): &quot;).strip()</span>
         
<span style="color:red;">-        if choice == '5':</span>
<span style="color:red;">-            print(&quot;\nThank you for using the calculator. Goodbye!&quot;)</span>
<span style="color:green;">+</span><span style="color:green;">        if choice == '6':</span>
<span style="color:green;">+</span><span style="color:green;">            print(&quot;\nThank you for using the enhanced calculator. Goodbye!&quot;)</span>
             break
             
<span style="color:red;">-        if choice not in ['1', '2', '3', '4']:</span>
<span style="color:green;">+</span><span style="color:green;">        if choice not in ['1', '2', '3', '4', '5']:</span>
             print(&quot;Error: Invalid choice. Please try again.&quot;)
             continue
             
         try:
             a = get_number(&quot;\nEnter first number: &quot;)
<span style="color:red;">-            b = get_number(&quot;Enter second number: &quot;)</span>
<span style="color:green;">+</span><span style="color:green;">            b = get_number(&quot;Enter second number: &quot;) if choice != '5' else get_number(&quot;Enter exponent: &quot;)</span>
             
             result = perform_operation(choice, a, b, config['precision'])
             if result is not None:
<span style="font-weight:bold;">diff --git a/case1/math_operations/calculator.py b/case2/math_operations/calculator.py</span>
<span style="font-weight:bold;">index b24492b..2415c5e 100644</span>
<span style="font-weight:bold;">--- a/case1/math_operations/calculator.py</span>
<span style="font-weight:bold;">+++ b/case2/math_operations/calculator.py</span>
<span style="color:teal;">@@ -20,14 +20,18 @@</span> def divide(a: float, b: float) -&gt; float:
     
     Args:
         a: Numerator
<span style="color:red;">-        b: Denominator (must not be zero)</span>
<span style="color:green;">+</span><span style="color:green;">        b: Denominator (must be non-zero)</span>
         
     Returns:
<span style="color:red;">-        Result of division</span>
<span style="color:green;">+</span><span style="color:green;">        float: Result of division</span>
         
     Raises:
<span style="color:red;">-        ValueError: If b is zero</span>
<span style="color:green;">+</span><span style="color:green;">        ZeroDivisionError: If b is zero</span>
     &quot;&quot;&quot;
     if b == 0:
<span style="color:red;">-        raise ValueError(&quot;Cannot divide by zero&quot;)</span>
<span style="color:green;">+</span><span style="color:green;">        raise ZeroDivisionError(&quot;Cannot divide by zero&quot;)</span>
     return a / b
<span style="color:green;">+</span>
<span style="color:green;">+</span><span style="color:green;">def power(base: float, exponent: float) -&gt; float:</span>
<span style="color:green;">+</span><span style="color:green;">    &quot;&quot;&quot;Calculate base raised to the power of exponent.&quot;&quot;&quot;</span>
<span style="color:green;">+</span><span style="color:green;">    return base ** exponent</span>

    </pre>
  </div>
  <footer>
    <p>Files ignored by Git are ignored here too.</p>
    
  </footer>
  <script>document.addEventListener("DOMContentLoaded", function() {
  // Helper function to create directory tree structure
  function buildTree(diffSections) {
    const root = { name: '', children: {}, files: [] };
    
    diffSections.forEach(section => {
      // Skip the first directory (a/ or b/) and process the rest
      const path = section.path.split('/').slice(1);
      let current = root;
      
      // If no path left after removing the first part, it's a file in the root
      if (path.length === 0) {
        root.files.push(section);
        return;
      }
      
      // Traverse or create directory structure
      for (let i = 0; i < path.length - 1; i++) {
        const dir = path[i];
        if (!current.children[dir]) {
          current.children[dir] = { name: dir, children: {}, files: [], parent: current };
        }
        current = current.children[dir];
      }
      
      // Add file to current directory
      current.files.push(section);
    });
    
    return root;
  }
  
  // Render the directory tree to HTML
  function renderTree(node, level = 0) {
    let html = '';
    const indent = '  '.repeat(level);
    
    // Render directories first
    Object.entries(node.children)
      .sort(([a], [b]) => a.localeCompare(b))
      .forEach(([name, child]) => {
        html += `${indent}<div class="directory">
${indent}  <div class="dir-toggle" data-level="${level}">
${indent}    <span class="dir-icon">📁</span> ${name}
${indent}  </div>
${indent}  <div class="dir-content">
${indent}    ${renderTree(child, level + 1)}
${indent}  </div>
${indent}</div>`;
      });
    
    // Then render files
    node.files.forEach(file => {
      // Render file header and content
      html += `${indent}<div class="file">
${indent}  <div class="file-header" data-level="${level}">
${indent}    <span class="file-icon">📄</span> ${file.path.split('/').pop()}
${indent}  </div>
${indent}  <div class="file-content">
${indent}    <div class="diff-header">${file.content}</div>`;
      
      // Render hunks if they exist
      if (file.hunks && file.hunks.length > 0) {
        file.hunks.forEach((hunk, index) => {
          if (hunk.isHunk) {
            // Render hunk header and content
            html += `
${indent}    <div class="hunk">
${indent}      <div class="hunk-header">
${indent}        <span class="hunk-toggle">▶</span>
${indent}        <span class="hunk-title">Hunk starting at line ${hunk.startLine}</span>
${indent}        <span class="hunk-context">${hunk.header}</span>
${indent}      </div>
${indent}      <div class="hunk-content">
${indent}        <pre>${hunk.content}</pre>
${indent}      </div>
${indent}    </div>`;
          } else {
            // Render non-hunk content (usually the diff header)
            html += `
${indent}    <div class="diff-non-hunk">
${indent}      <pre>${hunk.content}</pre>
${indent}    </div>`;
          }
        });
      } else {
        // Fallback for files without hunks
        html += `
${indent}    <pre>${file.content}</pre>`;
      }
      
      // Close file content and file divs
      html += `
${indent}  </div>
${indent}</div>`;
    });
    
    return html;
  }
  
  // Process all pre elements containing diff output
  document.querySelectorAll('pre').forEach(function(pre) {
    const html = pre.innerHTML;
    const parts = html.split(/(diff --git a\/[^\s]+ b\/[^\s]+)/);
    
    if (parts.length > 1) {
      const diffSections = [];
      
      // Parse diff sections
      for (let i = 1; i < parts.length; i += 2) {
        const headerLine = parts[i];
        const content = parts[i + 1];
        const m = headerLine.match(/diff --git a\/([^\s]+) b\/([^\s]+)/);
        
        if (m) {
          // Parse hunks from content
          const hunkRegex = /(@@[^@]*@@)([\s\S]*?)(?=@@|$)/g;
          const hunks = [];
          let hunkMatch;
          let lastIndex = 0;
          
          // Extract all hunks
          while ((hunkMatch = hunkRegex.exec(content)) !== null) {
            const hunkHeader = hunkMatch[1];
            const hunkContent = hunkMatch[2];
            const hunkStart = hunkMatch.index;
            
            // Add any content before the first hunk
            if (hunks.length === 0 && hunkStart > 0) {
              hunks.push({
                isHunk: false,
                content: content.substring(0, hunkStart)
              });
            }
            
            // Add the hunk
            hunks.push({
              isHunk: true,
              header: hunkHeader,
              content: hunkContent,
              startLine: hunkHeader.match(/^@@ -\d+(?:,\d+)? \+(\d+)(?:,\d+)? @@/)[1]
            });
            
            lastIndex = hunkRegex.lastIndex;
          }
          
          // Add any remaining content after the last hunk
          if (lastIndex < content.length) {
            hunks.push({
              isHunk: false,
              content: content.substring(lastIndex)
            });
          }
          
          // Use the path from side 'a' for the tree structure
          const path = m[1];
          diffSections.push({
            path: path,
            content: headerLine,
            hunks: hunks,
            // Store both paths for reference
            pathA: m[1],
            pathB: m[2]
          });
        }
      }
      
      // Build directory tree and render
      const tree = buildTree(diffSections);
      const renderedTree = renderTree(tree);
      
      // Create container and insert the tree
      const container = document.createElement('div');
      container.className = 'diff-container';
      container.innerHTML = renderedTree;
      
      // Replace the original pre element
      pre.replaceWith(container);
    }
  });
  
  // Add event listeners for toggles
  document.addEventListener('click', function(e) {
    // Directory toggles
    const dirToggle = e.target.closest('.dir-toggle');
    if (dirToggle) {
      const dirContent = dirToggle.nextElementSibling;
      dirContent.style.display = dirContent.style.display === 'none' ? 'block' : 'none';
      dirToggle.classList.toggle('collapsed');
      return;
    }
    
    // File toggles
    const fileHeader = e.target.closest('.file-header');
    if (fileHeader) {
      const fileContent = fileHeader.nextElementSibling;
      fileContent.style.display = fileContent.style.display === 'none' ? 'block' : 'none';
      fileHeader.classList.toggle('collapsed');
      return;
    }
    
    // Hunk toggles
    const hunkHeader = e.target.closest('.hunk-header');
    if (hunkHeader) {
      const hunkContent = hunkHeader.nextElementSibling;
      const toggleIcon = hunkHeader.querySelector('.hunk-toggle');
      hunkContent.style.display = hunkContent.style.display === 'none' ? 'block' : 'none';
      hunkHeader.classList.toggle('collapsed');
      toggleIcon.textContent = hunkContent.style.display === 'none' ? '▶' : '▼';
      return;
    }
  });
  
  // Initialize all directories as expanded
  document.querySelectorAll('.dir-content').forEach(el => {
    el.style.display = 'block';
  });
  
  // Initialize all file contents as collapsed
  document.querySelectorAll('.file-content').forEach(el => {
    el.style.display = 'none';
  });
  
  // Initialize all hunk contents as expanded
  document.querySelectorAll('.hunk-content').forEach(el => {
    el.style.display = 'block';
    const header = el.previousElementSibling;
    const toggleIcon = header?.querySelector('.hunk-toggle');
    if (toggleIcon) {
      toggleIcon.textContent = '▼';
    }
  });
});
</script>
</body>
</html>