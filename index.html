<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- This file was created with the aha Ansi HTML Adapter. https://github.com/theZiz/aha -->
<html xmlns="http://www.w3.org/1999/xhtml">
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="application/xml+xhtml; charset=UTF-8"/>
  <meta charset="UTF-8">
  <title>diff :: case1 (6f619b0a) :: case2 (6f619b0a)</title>
  <style>:root {
    --zenburn-bg:       #3f3f3f;
    --zenburn-fg:       #dcdccc;
    --zenburn-highlight:#6f6f6f;
    --zenburn-accent:   #f0dfaf;
    --zenburn-muted:    #9fafaf;
}

body {
    color: var(--zenburn-fg);
    background-color: var(--zenburn-bg);
    font-family: sans-serif;
}

.toggle {
    cursor: pointer;
    display: block;
    background: var(--zenburn-highlight);
    padding: 0.4em 0.6em;
    color: var(--zenburn-accent);
    border-left: 3px solid var(--zenburn-accent);
    transition: background 0.3s, color 0.3s;
    word-break: break-all;
}

.toggle:hover {
    background: #5f5f5f;
    color: var(--zenburn-fg);
}

.content {
    display: none;
    padding: 0.4em;
    background-color: #2b2b2b;
    color: var(--zenburn-muted);
    border-left: 2px solid var(--zenburn-highlight);
    margin-left: 1em;
}

.section.root > .content { margin-left: 0; }
.section.dir > .content { margin-left: 0.5em; }
.section.file > .content { margin-left: 1em; }
.section.hunk > .content { margin-left: 1.5em; }

.section.open .content {
    display: block;
}

@media (min-width: 768px) {
    body { font-size: 16px; }
    .toggle { padding: 0.6em 0.8em; }
    .content { margin-left: 2em; }
    .section.root > .content { margin-left: 0; }
    .section.dir > .content { margin-left: 1em; }
    .section.file > .content { margin-left: 2em; }
    .section.hunk > .content { margin-left: 3em; }
}
</style>
</head>
<body>
  <h1>diff :: case1 (6f619b0a) :: case2 (6f619b0a)</h1>
  <div id="diff-content">
    <pre>
      <span style="font-weight:bold;">diff --git a/case1/file1.py b/case2/file1.py</span>
<span style="font-weight:bold;">index 3b7ee30..b018139 100644</span>
<span style="font-weight:bold;">--- a/case1/file1.py</span>
<span style="font-weight:bold;">+++ b/case2/file1.py</span>
<span style="color:teal;">@@ -1,5 +1,5 @@</span>
 def message():
<span style="color:red;">-    return &quot;case1 file1&quot;</span>
<span style="color:green;">+</span><span style="color:green;">    return &quot;case2 file1&quot;</span>
 
 if __name__ == &quot;__main__&quot;:
     print(message())
<span style="font-weight:bold;">diff --git a/case1/file2.py b/case2/file2.py</span>
<span style="font-weight:bold;">index 4b55619..4ebfb32 100644</span>
<span style="font-weight:bold;">--- a/case1/file2.py</span>
<span style="font-weight:bold;">+++ b/case2/file2.py</span>
<span style="color:teal;">@@ -1,7 +1,7 @@</span>
<span style="color:red;">-VALUE = 1</span>
<span style="color:green;">+</span><span style="color:green;">VALUE = 2</span>
 
 def double(x):
<span style="color:red;">-    return x * 2</span>
<span style="color:green;">+</span><span style="color:green;">    return x * 2 + VALUE</span>
 
 if __name__ == &quot;__main__&quot;:
<span style="color:red;">-    print(double(VALUE))</span>
<span style="color:green;">+</span><span style="color:green;">    print(double(1))</span>
<span style="font-weight:bold;">diff --git a/case1/file3.py b/case2/file3.py</span>
<span style="font-weight:bold;">index 9552088..ebf8077 100644</span>
<span style="font-weight:bold;">--- a/case1/file3.py</span>
<span style="font-weight:bold;">+++ b/case2/file3.py</span>
<span style="color:teal;">@@ -1,5 +1,5 @@</span>
 def greet(name):
<span style="color:red;">-    return f&quot;Hello, {name}!&quot;</span>
<span style="color:green;">+</span><span style="color:green;">    return f&quot;Hi, {name}!&quot;</span>
 
 if __name__ == &quot;__main__&quot;:
     print(greet(&quot;World&quot;))

    </pre>
  </div>
  <footer>
    <p>Files ignored by Git are ignored here too.</p>
    
  </footer>
  <script>document.addEventListener("DOMContentLoaded", function () {
  const pre = document.querySelector('#diff-content pre');
  if (!pre) return;
  const html = pre.innerHTML;

  // Split diff output into individual file sections
  const parts = html.split(/(<span[^>]*>diff --git a\/\S+ b\/\S+<\/span>)/);
  const files = [];
  for (let i = 1; i < parts.length; i += 2) {
    const header = parts[i];
    const body = parts[i + 1] || '';
    const m = header.match(/diff --git a\/(\S+) b\//);
    const path = m ? m[1] : 'unknown';
    files.push({ path: path, html: header + body });
  }

  // Build directory tree from file paths
  const root = { dirs: {}, files: [] };
  files.forEach(function (f) {
    const segments = f.path.split('/');
    const fileName = segments.pop();
    let node = root;
    segments.forEach(function (seg) {
      if (!node.dirs[seg]) node.dirs[seg] = { dirs: {}, files: [] };
      node = node.dirs[seg];
    });
    node.files.push({ name: fileName, html: f.html });
  });

  function stripTags(str) {
    const tmp = document.createElement('div');
    tmp.innerHTML = str;
    return tmp.textContent || tmp.innerText || '';
  }

  function renderHunks(fileHtml) {
    const parts = fileHtml.split(/(<span[^>]*>@@[^@]*@@<\/span>)/);
    const hunks = [];
    const preamble = parts[0];
    if (parts.length <= 1) {
      hunks.push({ header: stripTags(preamble), html: fileHtml });
    } else {
      for (let j = 1; j < parts.length; j += 2) {
        const chunk = (j === 1 ? preamble : '') + parts[j] + (parts[j + 1] || '');
        hunks.push({ header: stripTags(parts[j]), html: chunk });
      }
    }
    return hunks;
  }

  function renderFile(name, html) {
    let out = '<div class="section file">';
    out += '<div class="toggle">' + name + '</div>';
    out += '<div class="content">';
    renderHunks(html).forEach(function (h) {
      out += '<div class="section hunk">';
      out += '<div class="toggle">' + h.header + '</div>';
      out += '<div class="content"><pre>' + h.html + '</pre></div>';
      out += '</div>';
    });
    out += '</div></div>';
    return out;
  }

  function renderDir(name, node, isRoot) {
    let out = '<div class="section dir' + (isRoot ? ' open root' : '') + '">';
    if (!isRoot) {
      out += '<div class="toggle">' + name + '</div>';
    }
    out += '<div class="content">';
    Object.keys(node.dirs).sort().forEach(function (d) {
      out += renderDir(d, node.dirs[d], false);
    });
    node.files.forEach(function (f) {
      out += renderFile(f.name, f.html);
    });
    out += '</div></div>';
    return out;
  }

  pre.outerHTML = renderDir('', root, true);

  document.addEventListener('click', function (e) {
    if (e.target.classList.contains('toggle')) {
      e.target.parentNode.classList.toggle('open');
    }
  });
});
</script>
</body>
</html>